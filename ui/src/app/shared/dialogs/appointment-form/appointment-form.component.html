<div style="position: relative;">
    <mat-toolbar color="primary">Schedule Reminder</mat-toolbar>
    <div class="loading-overlay" *ngIf="saving">
        <div class="text-center">
            <div>Saving</div>
            <div class="mt-3 d-flex justify-content-center w-100">
                <mat-spinner diameter="50" strokeWidth="2"></mat-spinner>
            </div>
        </div>
    </div>
    
    <div style="margin-inline: 4px; margin-bottom: 4px;">
        
          
        <div style="max-height: 80vh; overflow-y: auto;">
                <div [formGroup]="appointmentForm">
                        <div class="d-flex mt-1">
                            <mat-form-field class="flex-grow-1" appearance="fill">
                                <mat-label>Patient</mat-label>
                                <mat-select formControlName="patient" disabled="true">
                                    <mat-option [value]="data.patient.patient.uuid" selected="selected">{{data.patient.patient.display}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                       
                        <!-- <div class="d-flex mt-1">
                            <mat-form-field class="flex-grow-1" appearance="fill">
                                <mat-label>Service</mat-label>
                                <mat-select formControlName="service" disabled="true">
                                    <mat-option [value]="data.location.uuid" selected="selected">{{data.location.display}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div> -->
                        <div class="d-flex mt-1">
                            <mat-form-field class="flex-grow-1" appearance="fill">
                                <mat-label>Location</mat-label>
                                <mat-select formControlName="location" disabled="true">
                                    <mat-option [value]="data.location.parentLocation.uuid"
                                        selected="selected">{{data.location.parentLocation.display}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="d-flex mt-1">
                            <mat-form-field class="flex-grow-1" appearance="fill">
                                <mat-label>Appointment Type</mat-label>
                                <mat-select formControlName="appointmentType">
                                    <mat-option value="information">Information</mat-option>
                                    <mat-option value="appointments">Appointments</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        
                        <div class="d-flex mt-1">
                            <mat-form-field class="flex-grow-1" appearance="fill">
                                <mat-label>Phone Number</mat-label>
                                <input matInput formControlName="phoneNumber">
                            </mat-form-field>
                        </div>

                        <div class="d-flex mt-1">
                            <mat-form-field class="flex-grow-1" appearance="fill">
                                <mat-label>Scheduled Send Date</mat-label>
                                <input matInput [matDatepicker]="picker" formControlName="scheduledSendTime">
                                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>

                            </mat-form-field>
                        </div>

                   
                        <div class="mt-2">
                            <mat-form-field class="w-100" appearance="fill">
                                <mat-label>Write SMS.</mat-label>
                                <textarea matInput rows="5" id="message" formControlName="message" placeholder="message"></textarea>
                            </mat-form-field>
                        </div>
                    </div>
                    <div *ngIf="showSMSForm">
                        <form [formGroup]="smsForm" (submit)="addNewSMS()">
                            <div class="d-flex mt-1">
                                <mat-form-field class="flex-grow-1" appearance="fill">
                                    <mat-label>Appointment Type</mat-label>
                                    <mat-select formControlName="appointmentType">
                                        <mat-option value="information">Information</mat-option>
                                        <mat-option value="appointments">Appointments</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="d-flex mt-1">
                                <mat-form-field clas="flex-grow-1" appearance="fill">
                                    <mat-label>Scheduled Send Date</mat-label>
                                    <input matInput [matDatepicker]="picker" formControlName="scheduledSendDate">
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                            </div>
    
                            <div class="mt-2">
                                <mat-form-field class="w-100" appearance="fill">
                                    <mat-label>Write SMS.</mat-label>
                                    <textarea matInput rows="5" id="message" formControlName="message" placeholder="message"></textarea>
                                </mat-form-field>
                            </div>
                        </form>
                    </div>

                </div>
                

                

        </div>
        <div class="d-flex justify-content-end m-4">
            <button mat-stroked-button (click)="onClose($event)">Close</button>
            <button mat-flat-button color="primary" class="ml-2" (click)="onSave($event)">
                Save
            </button>
            <button mat-stroked-button (click)= "showAddSMSForm()" color="secondary" class="ml-2">
                <mat-icon>add</mat-icon>
                Add new Sms
            </button>
            
        </div>
        
        

  
